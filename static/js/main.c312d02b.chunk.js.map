{"version":3,"sources":["SolarPunkPainting.jpg","getEthereum.js","App.js","reportWebVitals.js","index.js"],"names":["getEthereum","a","document","readyState","Promise","resolve","setTimeout","window","ethereum","App","useState","account","setOwnerAccount","setChainID","setNetwork","contractAddress","setContractAddress","contract","setContract","customerAddress","setCustomerAddress","donorAddress","setDonorAddress","agreementValue","setAgreementValue","weight1","setWeight1","weight2","setWeight2","weight3","setWeight3","connected","connect","web3","Web3","provider","providers","HttpProvider","request","method","accounts","eth","getChainId","chain","net","getNetworkType","acc","console","log","address","map","_contract","Contract","BrightLink","abi","methods","addNewCustomer","send","then","setBaseLine","UpdateOracleData","settleAgreement","className","style","backgroundImage","background","backgroundPosition","backgroundSize","backgroundRepeat","width","height","display","justifyContent","alignItems","color","onClick","type","value","placeholder","onChange","e","target","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.c312d02b.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/SolarPunkPainting.42dce355.jpg\";","export const getEthereum = async () => {\n\n    // event listener is not reliable\n    while (document.readyState !== \"complete\") {\n        await new Promise(resolve => setTimeout(resolve, 50))\n    }\n\n    return window.ethereum\n\n}\n","import React, {useEffect, useState} from 'react';\nimport \"./App.css\";\nimport Web3 from 'web3'\nimport background from \"./SolarPunkPainting.jpg\";\nimport BrightLink from './artifacts/contracts/BrightLink.json';\nimport map from \"./artifacts/deployments/map.json\";\nimport {getEthereum} from \"./getEthereum\"\n\n// uses functional component syntax\nfunction App(){\n\n  const [account, setOwnerAccount] = useState()\n  const [chainID, setChainID] = useState()\n  const [network, setNetwork] = useState()\n  const [contractAddress, setContractAddress] = useState()\n  const [contract, setContract] = useState()\n  const[customerAddress, setCustomerAddress] = useState()\n  const[donorAddress, setDonorAddress] = useState()\n  const [agreementValue, setAgreementValue] = useState()\n  const[weight1, setWeight1] = useState()\n  const[weight2, setWeight2] = useState()\n  const[weight3, setWeight3] = useState()\n  const [connected, connect] = useState()\n\n  \n  // loadBlockChain detects metamask account\n  // and network ID \n  async function loadBlockChain(){\n\n    const ethereum = await getEthereum()\n    let web3\n\n    if (ethereum) {\n        web3 = new Web3(ethereum)\n    } else if (window.web3) {\n        web3 = window.web3\n    } else {\n        const provider = new Web3.providers.HttpProvider(\n            \"http://127.0.0.1:8545\"\n        );\n        web3 = new Web3(provider)\n    }\n\n    // // Try to enable accounts (connect metamask)\n    // const ethereum = await getEthereum()\n    const accounts = await ethereum.request({method:'eth_requestAccounts'})\n    const chain = await web3.eth.getChainId()\n    const net = await web3.eth.net.getNetworkType()\n\n    //const accounts = await web3.eth.getAccounts()\n    const acc = accounts[0]\n    console.log(\"web3: \" + web3)\n    console.log(\"accounts: \" + accounts)\n    console.log(\"connected account: \" + acc)\n\n    setNetwork(net)\n    setChainID(chain)\n    setOwnerAccount(acc)\n\n    var address = ''\n\n    if (chain =='1337'){\n      address = map[\"dev\"]['BrightLink'][0]\n    }\n    else if(chain == 42){\n      address = map[\"42\"]['BrightLink'][0]\n    }\n    else if(chain==3){\n      address = map[\"3\"]['BrightLink'][0]\n    }\n    else if(chain==4){\n       address = map[\"4\"]['BrightLink'][0]\n    }\n    else{\n      throw 'Please connect to a valid testnet'\n    }\n\n    setContractAddress(address)\n    const _contract = new web3.eth.Contract(BrightLink.abi, address, acc)\n\n    setContract(_contract)\n    console.log(\"address: \" + address)\n    console.log(\"contract:  \" + _contract)\n    console.log(\"chain: \" + chain)\n    console.log(\"contract successfully loaded\")\n    \n    setWeight1(100)\n    setWeight2(100)\n    setWeight3(100)\n    \n    if (account){\n      connect(true)\n    }\n  }\n\n\n\n  async function AddNewCustomer(){\n\n    console.log(\"INSIDE FUNC, account = \" + account)\n    await contract.methods.addNewCustomer(customerAddress,donorAddress,agreementValue)\n      .send({'from':account})\n        .then(console.log(\"successfully added new customer\"))\n    \n    console.log(customerAddress)\n    console.log(donorAddress)\n    console.log(agreementValue)\n    console.log(typeof(contract))\n\n  }\n\n  async function setBaseLine(){\n    await contract.methods.setBaseLine(customerAddress,weight1,weight2,weight3)\n      .send({'from':account})\n        .then(console.log(\"successfully set base line\"))\n  }\n\n  async function getNewData(){\n    await contract.methods.UpdateOracleData(customerAddress,weight1,weight2,weight3)\n      .send({'from':account})\n        .then(console.log(\"successfully set base line\"))\n  }\n\n  async function settleAgreement(){\n    await contract.methods.settleAgreement(customerAddress)\n    .send({'from':account})\n      .then(console.log(\"successfully set base line\"))\n\n  }\n  \n\n  return (\n  \n    <div \n    className=\"App\" \n    style={{ backgroundImage: 'url(' + background + ')',\n    backgroundPosition: 'center',\n    backgroundSize: 'cover',\n    backgroundRepeat: 'no-repeat',\n    width: '100vw',\n    height: '100vh',\n  \n    }}>\n    \n    <br></br>\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <h1>BrightLink </h1>\n    </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <h2>Incentivized urban greening validated by satellite data</h2>\n    </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    {<button onClick={loadBlockChain} > Connect Wallet</button>}\n    </li>\n      \n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'green'}}>\n    {connected? <p><b>CONNECTED!</b></p> : null}\n    </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <p>Contract is deployed at: {contractAddress}</p>\n    </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <p>Connected to account: {account}</p>\n    </li>\n\n      \n    <br></br>\n    <br></br>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <p><h3>Start new project </h3></p>\n    </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n      <p>Customer (Ethereum address)</p>\n      </li>\n    \n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <input \n      type=\"text\"\n      value={customerAddress}\n      placeholder=\"Set Customer Address\"\n      onChange={e => setCustomerAddress(e.target.value)} />\n      </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <p>Donor (Ethereum address)</p>\n    </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <input \n        type=\"text\"\n        value={donorAddress}\n        placeholder=\"Set Donor Address\"\n        onChange={e => setDonorAddress(e.target.value)} />\n    </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <p>Funding Value (Dai)</p>\n    </li>\n\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    <input\n      type=\"text\"\n      value={agreementValue}\n      placeholder=\"Set Agreement Value\"\n      onChange={e => setAgreementValue(e.target.value)} />\n    </li>\n    <br></br>\n    <li style={{display: 'flex', justifyContent:'center', alignItems:'center', color: 'black'}}>\n    {<button onClick={AddNewCustomer}>CONFIRM</button>}\n    </li>\n\n    <br></br>\n    <br></br>\n\n    <p><b>Change satellite weightings and query remote sensing data</b></p>\n    <p><i>(please send 0.6 LINK to the contract to fund these queries</i></p>\n    <input\n      type=\"text\"\n      value={weight1}\n      placeholder=\"Set weight for Sentinel (%)\"\n      onChange={e => setWeight1(e.target.value)} />\n\n    <input\n      type=\"text\"\n      value={weight2}\n      placeholder=\"Set weight for Landsat (%)\"\n      onChange={e => setWeight2(e.target.value)} />\n\n    <input\n      type=\"text\"\n      value={weight3}\n      placeholder=\"Set weight for MODIS (%)\"\n      onChange={e => setWeight3(e.target.value)} />\n\n\n    {<button onClick={setBaseLine}>Set Baseline</button>}\n    {<button onClick={getNewData}>Get Updated Data</button>}\n\n    <br></br>\n    <br></br>\n    {<button onClick={settleAgreement}>Request Payout</button>}\n    \n    </div>\n\n  );\n  }\n\n\nexport default App\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}